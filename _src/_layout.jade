doctype
html
  head
    meta(name="viewport" content="width=device-width, initial-scale=1")
    title Lon Ingram
    link(rel="stylesheet" href="/css/main.css")
  body
    != yield
    script.
      (function () {
        function css(el, prop) {
          return window.getComputedStyle ?
            getComputedStyle(el).getPropertyValue(prop) :
            el.currentStyle[prop];
        }

        function fitTitleText() {
          var titleTextEls = document.querySelectorAll('.title-text span');
          var el;

          for (var i = 0; i < titleTextEls.length; i++) {
            el = titleTextEls[i];
            el.style.fontSize = Math.floor(
                0.95 *
                parseFloat(css(el, 'font-size')) *
                el.parentElement.clientWidth / el.clientWidth
              ) + 'px';
          }
        }

        if (!document.querySelectorAll || !window.addEventListener) {
          return;
        }

        fitTitleText();

        window.addEventListener('resize', fitTitleText);
        window.addEventListener('deviceorientation', fitTitleText);
      }());
    script.
      /*
      * FlowType.JS without jQuery.
      * Ported by Christian Dannie Storgaard. Based on:
      *
      * FlowType.JS 1.0
      * Copyright (c) 2013, Simple Focus http://simplefocus.com/
      *
      * FlowType.JS by Simple Focus (http://simplefocus.com/)
      * is licensed under the MIT License. Read a copy of the
      * license in the LICENSE.txt file or at
      * http://choosealicense.com/licenses/mit
      *
      * Thanks to Giovanni Difeterici (http://www.gdifeterici.com/)
      */

      (function(global) {
          
          var addEvent = null;
          if ( document.addEventListener ) {
              addEvent = function(element, eventName, callback) {
                  return element.addEventListener( eventName, callback, false );
              };
          } else if ( document.attachEvent ) {
              addEvent = function(element, eventName, callback) {
                  element.attachEvent( 'on'+eventName, callback );
              };
          } else {
              addEvent = function(element, eventName, callback) {
                  element['on'+eventName] = callback;
              };
          }
          
          global.flowtype = function(element, options) {
              
              // Establish default settings/variables
              // ====================================
              options.maximum   = options.maximum   || 9999;
              options.minimum   = options.minimum   || 1;
              options.maxFont   = options.maxFont   || 9999;
              options.minFont   = options.minFont   || 1;
              options.fontRatio = options.fontRatio || 35;
              options.lineRatio = options.lineRatio || 1.45;
                  
              // Do the magic math
              // =================
              changes = function(el) {
                  var  elw = el.clientWidth
                      ,width = elw > options.maximum ? options.maximum : elw < options.minimum ? options.minimum : elw
                      ,fontBase = width / options.fontRatio
                      ,fontSize = fontBase > options.maxFont ? options.maxFont : fontBase < options.minFont ? options.minFont : fontBase
                  ;
                      
                  el.style.fontSize   = fontSize + 'px';
                  el.style.lineHeight = fontSize * options.lineRatio + 'px';
              };
              
              // Make the magic visible
              // ======================
              element.updateFlowType = function(){changes(element);};
              
              // Make changes upon resize
              addEvent( global, 'resize', element.updateFlowType );
                  
              // Set changes on load
              element.updateFlowType();
              
              // addEvent visiblity for demo purposes - REMOVE IN PRODUCTION
              global.flowtype.addEvent = addEvent;
          };
      }(window));
      window.flowtype(document.querySelector('.bio p'), {fontRatio: 22});
